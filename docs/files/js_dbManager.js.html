<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>js/dbManager.js</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="icon" href="../assets/favicon.ico">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
                <h1><img src="../assets/css/logo.png" title="" width="117" height="52"></h1>
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: </em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
                    <h2 class="off-left">APIs</h2>
                    <div id="api-tabview" class="tabview">
                        <ul class="tabs">
                            <li><a href="#api-classes">Classes</a></li>
                            <li><a href="#api-modules">Modules</a></li>
                        </ul>
                
                        <div id="api-tabview-filter">
                            <input type="search" id="api-filter" placeholder="Type to filter APIs">
                        </div>
                
                        <div id="api-tabview-panel">
                            <ul id="api-classes" class="apis classes">
                                <li><a href="../classes/Apartment.html">Apartment</a></li>
                                <li><a href="../classes/Chore.html">Chore</a></li>
                                <li><a href="../classes/DBManager.html">DBManager</a></li>
                                <li><a href="../classes/Message.html">Message</a></li>
                                <li><a href="../classes/React.Component.Messages.html">React.Component.Messages</a></li>
                                <li><a href="../classes/React.Component.TodoItem.html">React.Component.TodoItem</a></li>
                                <li><a href="../classes/React.Component.TodoList.html">React.Component.TodoList</a></li>
                                <li><a href="../classes/User.html">User</a></li>
                            </ul>
                
                
                            <ul id="api-modules" class="apis modules">
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
                    Show:
                    <label for="api-show-inherited">
                        <input type="checkbox" id="api-show-inherited" checked>
                        Inherited
                    </label>
            
                    <label for="api-show-protected">
                        <input type="checkbox" id="api-show-protected">
                        Protected
                    </label>
            
                    <label for="api-show-private">
                        <input type="checkbox" id="api-show-private">
                        Private
                    </label>
                    <label for="api-show-deprecated">
                        <input type="checkbox" id="api-show-deprecated">
                        Deprecated
                    </label>
            
                </div>
            
            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
<h1 class="file-heading">File: js/dbManager.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
var firebase = require(&quot;firebase&quot;);

// Firebase API Credentials
var config = {
  apiKey: &quot;AIzaSyCAFUnm_bsnpiRyziqTB41QZoLW3-OYp20&quot;,
  authDomain: &quot;rockmates-d8edb.firebaseapp.com&quot;,
  databaseURL: &quot;https://rockmates-d8edb.firebaseio.com&quot;,
  storageBucket: &quot;rockmates-d8edb.appspot.com&quot;,
  messagingSenderId: &quot;370968243217&quot;
};

// Singleton Design Pattern... We only want one
// instance of DBManager
let dbm_instance = null;

// Global Data for User &amp; Apartment
let user_cache = null; // User Object
let apt_cache = null;  // Apt Object

// Firebase Realtime checks before using cached version
/**
 * Represents a Database Manager.
 *
 * @class DBManager
 */
export default class DBManager {
    /**
     * Constructs a Database Manager.
     *
     * @method constructor
     * @constructor
     */
    constructor() {
        if(!dbm_instance){
            dbm_instance = this;
            firebase.initializeApp(config);
        }
        return dbm_instance;
    }

    /**
     * Attempts to sign a user in.
     *
     * @method signIn
     * @param {string} email - The user&#x27;s email
     * @param {string} password - The user&#x27;s password
     * @throws {Error} - A possible authentication error
     */
    signIn(email, password) {
        firebase.auth().signInWithEmailAndPassword(email, password)
        .catch(function(error) {
            // Handle Errors here.
            var errorCode = error.code;
            var errorMessage = error.message;
            switch (error.code) {
                case &#x27;auth/invalid-email&#x27;:
                    alert(&quot;Invalid email.&quot;);
                    break;
                case &#x27;auth/user-disabled&#x27;:
                    alert(&quot;User account disabled.&quot;);
                    break;
                case &#x27;auth/user-not-found&#x27;:
                    alert(&quot;User not found.&quot;);
                    break;
                case &#x27;auth/wrong-password&#x27;:
                    alert(&quot;Wrong password&quot;);
                    break;
                default:
                    alert(&quot;Error signing in.&quot;);
            }
        });
    }

    /**
     * Attempts to sign up a user.
     *
     * @method signUp
     * @param {string} email - The user&#x27;s email
     * @param {string} password - The user&#x27;s password
     * @throws {Error} - A possible authentication error
     */
    signUp(email, password) {
        return firebase.auth().createUserWithEmailAndPassword(email, password).catch(function(error) {
            switch (error.code) {
                case &#x27;auth/email-already-in-use&#x27;:
                    alert(&quot;Email is already in user.&quot;);
                    break;
                case &#x27;auth/invalid-email&#x27;:
                    alert(&quot;Email is invalid.&quot;);
                    break;
                default:
                    alert(&quot;Error signing up.&quot;);
            }
        });
    }

    /**
     * Adds a user to the database.
     *
     * @method addUser
     * @param {User} - The User Object to be added
     * @return {string} - The User ID of the added user
     */
    addUser(user) {
        var data = JSON.stringify(user);
        firebase.database().ref(&#x27;users/&#x27; + user.getUserID()).set(data);
    }

    /**
     * Gets the user.
     *
     * @method getUser
     * @param {string} [user=user_cache.getID()] - The user ID
     * @return {User} - The corresponding User
     */
    getUser(user=user_cache.getID()) {}

    /**
     * Adds an apartment.
     * 
     * @method addApartment
     * @param {Apartment} apartment - The apartment to be added
     * @throws {Error} - Possible failure to add Apartment
     */
    addApartment(apartment) {}

    /**
     * Gets an apartment.
     *
     * @method getApt
     * @param {string} apartment - The apartment ID
     * @return {Apartment} - The corresponding Apartment
     */
    getApt(apartment) {}

    /**
     * Adds a chore.
     *
     * @method addChore
     * @param {Chore} chore - The chore to be added.
     * @throws {Error} - Possible failure to add Chore
     */
    addChore(chore) {}

    /**
     * Gets all chores.
     *
     * @method getChores
     * @returns {Array{Chores}}
     */
    getChores() {}

    /**
     * Adds a message.
     *
     * @method addMessage
     * @param {Message} message - The message to be added.
     * @throws {Exception} - Possible failure to add Message
     */
    addMessage(message) {}

    /**
     * Gets all messages.
     *
     * @method getMessages
     * @returns {Array{Message}}
     */
    getMessages() {}
}

    </pre>
</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
